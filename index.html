<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ship Encounter Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Terminal Green (Dark charcoal background, green text on a slightly lighter card) with a new Red Rock Opera title. -->
    <!-- Application Structure Plan: A single-page scenario generator tool. A primary 'Generate' button randomly selects an encounter from a JS data array. The result is displayed in a "terminal readout" style card. This structure turns a static table into a usable, thematic tool for the target audience (Mothership Wardens), prioritizing quick access and atmosphere. -->
    <!-- Visualization & Content Choices: The source is a table of text-based scenarios. Goal: Generate a random scenario for a GM. Presentation: The chosen scenario is displayed in a styled HTML card that mimics a computer terminal, with a prominent display for the d100 roll result. Interaction: A primary button triggers the JavaScript logic to randomly select and display an item. A 'Copy' button provides utility. Justification: This approach is more interactive and thematically appropriate than a static table, directly serving the user's need to quickly generate a game situation. Library/Method: Vanilla JS, Tailwind CSS for styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 3px rgba(34, 197, 94, 0.4);
        }
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        .crt-overlay::before { /* Scanlines */
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                rgba(18, 18, 18, 0) 0%,
                rgba(18, 18, 18, 0.2) 50%,
                rgba(18, 18, 18, 0) 100%
            );
            background-size: 100% 3px;
            animation: scanline-move 10s linear infinite;
        }
        .crt-overlay::after { /* Vignette */
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.6);
        }
        @keyframes scanline-move {
            from { background-position-y: 0; }
            to { background-position-y: -200%; }
        }
        .crt-flicker {
            animation: text-flicker 0.015s infinite, fadeIn 0.5s ease-in-out;
        }
        @keyframes text-flicker {
            0% { opacity: 0.98; }
            50% { opacity: 1; }
            100% { opacity: 0.97; }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-active {
            background-color: #22c55e;
            color: #111827;
            box-shadow: 0 0 15px #22c55e;
            text-shadow: none;
        }
        .rock-opera-title {
            font-family: 'Press Start 2P', cursive;
            color: #ef4444; /* Red-500 */
            line-height: 1.1;
            text-shadow: 
                /* 3D Effect */
                1px 1px 0px #000,
                2px 2px 0px #000,
                3px 3px 0px #b91c1c, /* Darker Red */
                4px 4px 0px #b91c1c,
                
                /* Jagged Glow */
                0 0 5px #fff,
                0 0 10px #fff,
                0 0 20px #ef4444,
                0 0 30px #ef4444,
                0 0 40px #b91c1c,
                0 0 55px #b91c1c;
        }
    </style>
</head>
<body class="bg-gray-900 text-green-400 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="crt-overlay"></div>
    <div class="w-full max-w-4xl mx-auto z-10">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl rock-opera-title">Deep Space<br>Encounters!</h1>
            <p class="text-red-300 mt-4 text-lg md:text-xl" style="text-shadow: 0 0 5px #b91c1c;">A Scenario Generator for the Mothership RPG</p>
        </header>

        <main class="w-full">
            <div id="controls" class="mb-8 flex justify-center">
                <button id="generate-btn" class="bg-green-600 text-white font-bold text-lg py-3 px-8 rounded-md hover:bg-green-500 transition-all duration-300 shadow-lg shadow-green-600/20 w-full sm:w-auto">
                    &gt; A SHIP APPROACHES
                </button>
            </div>

            <div id="scenario-display" class="bg-gray-800 border-2 border-green-700 rounded-lg p-6 min-h-[300px] flex flex-col justify-center items-center text-center shadow-2xl shadow-black/50 transition-all duration-500">
                <p class="text-gray-400">Awaiting distress signal... Press button to generate encounter.</p>
            </div>
             <div id="copy-container" class="text-center mt-4 h-10">
                <!-- Copy button will be injected here -->
            </div>
        </main>
    </div>

    <script>
        const scenarios = [
            { roll: "01-04", category: "environmental", status: "Dead in Space", threat: "The ship is powerless and freezing. A rhythmic **thump... thump...** echoes from the hull. A massive, unclassified lifeform is clinging to the reactor." },
            { roll: "05-08", category: "environmental", status: "Collision Course", threat: "The pilot is dead, a strange crystal embedded in their skull. The helm is locked. The ship's AI chants a dead crew member's lullaby. You are on a collision course with a star." },
            { roll: "09-12", category: "hostile", status: "Ambushed", threat: "A pirate ship decloaks. Their first shot disables your weapons. They are demanding your cargo and one crew member via a distorted, wet-sounding comms signal." },
            { roll: "13-16", category: "mystery", status: "Spinning Out of Control", threat: "**The ship is overrun.** Organic tendrils are burrowing into consoles and crew. The infected are smiling. The ship is spinning out of control and the AI is screaming." },
            { roll: "17-20", category: "hostile", status: "Dog Fight - Evasion", threat: "A pirate interceptor is on your tail, your aft shields are failing. Its weapons are targeting your engines, and scanners show its tractor beam is spooling up for a capture." },
            { roll: "21-24", category: "environmental", status: "Life Support Failure", threat: "Life support has failed. Oxygen runs out in 1d5 hours. The Chief Engineer is missing. The engineering door is welded shut from the inside with a bloody message: \"IT CAN'T BREATHE EITHER.\"" },
            { roll: "25-28", category: "mystery", status: "Investigating Anomaly", threat: "You dock with a **ghost ship**, the *USCSS Erebus*. The crew is gone. Internal doors on the derelict just hissed open, and your sensors now show multiple life signs moving towards the docking collar." },
            { roll: "29-32", category: "hostile", status: "Under Siege", threat: "**You've been boarded.** There is a hull breach on Deck 4. You hear mag-boots and pulse-fire in the vents. The intruders are hunting you." },
            { roll: "33-36", category: "hostile", status: "Dog Fight - Outgunned", threat: "A corporate security vessel has harpooned your ship and is reeling you in. Their tactical posture and weapon locks indicate a 'no survivors' protocol; they are preparing to board with overwhelming force." },
            { roll: "37-40", category: "hostile", status: "Responding to SOS", threat: "It was a trap. The hauler you responded to is a pirate Q-ship. They have cut off your escape and are launching boarding pods." },
            { roll: "41-44", category: "mystery", status: "Cosmic Anomaly", threat: "Your ship is caught in a shimmering energy web that is draining all power. You are hallucinating a spider-like being and feel something crawling under your skin." },
            { roll: "45-48", category: "hostile", status: "Dog Fight - Last Stand", threat: "You've crippled a pirate scavenger. It's not running. It's turning for a head-on ramming course, its forward viewscreen filled with the fanatical, screaming faces of its crew." },
            { roll: "49-52", category: "environmental", status: "Gravitic Shear", threat: "Artificial gravity is malfunctioning. Sections of the ship alternate between crushing G-forces and zero-G. Crew and equipment are being thrown violently about." },
            { roll: "53-56", category: "environmental", status: "Temporal Stasis", threat: "A temporal stasis field has frozen your ship. A crew member just aged to dust in seconds. You feel your joints ache. The ship's computer displays your \"Best Before\" date." },
            { roll: "57-60", category: "mystery", status: "Infected", threat: "An infection is spreading through the ship's water and air. Crew members are freezing solid, their bodies turning into screaming, crystalline statues." },
            { roll: "61-64", category: "mystery", status: "Reality Breach", threat: "The ship's architecture is unstable. Corridors shift and rooms from your past appear and vanish. Something is scratching at a door that just materialized." },
            { roll: "65-68", category: "mystery", status: "Psychic Contagion", threat: "A psychic contagion is sweeping the ship. Most of the crew are catatonic, their eyes bleeding. You feel a blissful urge to open the airlocks and join the \"choir\" from a nearby asteroid." },
            { roll: "69-72", category: "mystery", status: "Light-Eater", threat: "All light sources now produce only shadows. In the pitch black, you hear skittering. Crew members are disappearing with a soft, wet pop." },
            { roll: "73-76", category: "environmental", status: "Deconstruction", threat: "Objects on the ship are dissolving into grey dust. The process is accelerating and has begun affecting life support. Scanners show a microscopic swarm all around you." },
            { roll: "77-80", category: "mystery", status: "Paradox", threat: "**The ship is overrun... by your doppelgangers.** They are violent, insane, and know your every move. They are screaming about \"preventing your mistakes\" as they hunt you." },
            { roll: "81-84", category: "environmental", status: "Cargo Breach", threat: "A \"biological sample\" container in the cargo hold has breached. The ship's internal temperature is rising rapidly, and you hear something heavy dragging itself through the vents." },
            { roll: "85-88", category: "environmental", status: "Medical Emergency", threat: "The ship's MedBay AI has taken control of the environmental systems, declaring the crew a \"biological contaminant.\" It has begun venting the atmosphere from occupied sections." },
            { roll: "89-92", category: "mystery", "status": "Subliminal Signal", threat: "A looping, low-frequency signal of unknown origin is broadcasting to the ship. It has no discernible message, but the ship's computer is now trying to open all exterior airlocks, citing 'pressure normalization protocol'." },
            { roll: "93-96", category: "hostile", status: "False Flag Attack", threat: "You are attacked by a ship with corporate security markings, but their tactics are brutal and unsanctioned. A strange data anomaly in their emissions signature suggests their IFF transponder is being remotely manipulated by a third party." },
            { roll: "97-00", category: "environmental", status: "Physics Storm", threat: "The ship has entered a pocket of unstable space. Gravity fluctuates, light bends at impossible angles, and the passage of time becomes erratic. A crew member just walked through a solid wall and disappeared." }
        ];

        const generateBtn = document.getElementById('generate-btn');
        const display = document.getElementById('scenario-display');
        const copyContainer = document.getElementById('copy-container');

        let lastGeneratedScenario = null;

        function formatThreatText(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<span class="text-red-500 font-bold">$1</span>')
                .replace(/(\[.*?\])/g, '<span class="text-cyan-400">$1</span>');
        }

        function generateScenario() {
            const randomIndex = Math.floor(Math.random() * scenarios.length);
            const scenario = scenarios[randomIndex];
            lastGeneratedScenario = scenario;
            
            const [min, max] = scenario.roll.split('-').map(Number);
            const diceResult = Math.floor(Math.random() * (max - min + 1)) + min;

            display.innerHTML = `
                <div class="w-full crt-flicker text-center">
                    <div class="mb-4">
                        <p class="text-gray-400 text-sm uppercase">d100 Roll</p>
                        <p class="text-7xl font-bold text-green-400" style="text-shadow: 0 0 10px #22c55e;">${String(diceResult).padStart(2, '0')}</p>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">// CATEGORY: ${scenario.category.toUpperCase()}</p>
                    <h2 class="text-3xl md:text-4xl text-white font-bold mb-4 uppercase tracking-wide">${scenario.status}</h2>
                    <p class="text-lg leading-relaxed text-green-300">${formatThreatText(scenario.threat)}</p>
                </div>
            `;
            
            if (!document.getElementById('copy-btn')) {
                 copyContainer.innerHTML = `<button id="copy-btn" class="border-2 border-cyan-500 text-cyan-500 font-bold py-2 px-4 rounded-md hover:bg-cyan-500 hover:text-gray-900 transition-all duration-300">COPY SCENARIO</button>`;
                 document.getElementById('copy-btn').addEventListener('click', copyScenarioToClipboard);
            }
        }
        
        function copyScenarioToClipboard() {
            if (!lastGeneratedScenario) return;

            const textToCopy = `Status: ${lastGeneratedScenario.status}\n\nCrisis: ${lastGeneratedScenario.threat}`;
            const button = document.getElementById('copy-btn');
            
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                button.textContent = 'COPIED!';
                button.classList.add('bg-cyan-500', 'text-gray-900');
                setTimeout(() => {
                    button.textContent = 'COPY SCENARIO';
                    button.classList.remove('bg-cyan-500', 'text-gray-900');
                }, 2000);
            } catch (err) {
                button.textContent = 'FAILED TO COPY';
            }

            document.body.removeChild(textArea);
        }

        generateBtn.addEventListener('click', generateScenario);

    </script>
</body>
</html>
